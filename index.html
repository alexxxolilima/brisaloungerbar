<!doctype html>
<html lang="pt-BR">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no" />
  <meta name="theme-color" content="#050b14" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta nome="description" content="Cardapio Brisa Lounge Bar">
  <meta name="Keywords" content="Cardapio Brisa, Brisa Bar , Cardapio digital">
  <meta name="Author" Content="Alex Lima">

  <!-- CSS principal -->
  <link rel="stylesheet" href="style.css">

  <!-- Pré-carregamento opcional do JSON (app.js também tenta carregar automaticamente) -->
  <script>
    (function preloadMenuJson() {
      try {
        fetch('./menu_final_brisa.json', { cache: 'no-store' }).then(res => {
          if (!res.ok) return;
          return res.json();
        }).then(json => {
          if (json) window.__preloaded_menu = json;
        }).catch(() => {/* não crítico */ });
      } catch (e) { }
    })();
  </script>
</head>

<body>
  <div class="app">

    <!-- HEADER -->
    <header>
      <div class="header-content">
        <div class="brand-row">
          <img id="logoBtn" class="logo-img" src="./logo.jpg" alt="Brisa Lounge Bar" />
          <div class="brand-info">
            <h1>BRISA</h1>
            <p>LOUNGE BAR — cardápio</p>
          </div>
          <div id="connStatus" class="connection-status" aria-hidden="true"></div>
        </div>

        <div class="search-container">
          <svg class="search-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round"
              stroke-linejoin="round" />
            <circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="2" stroke-linecap="round"
              stroke-linejoin="round" />
          </svg>
          <input id="searchInput" class="search-input" type="search" placeholder="Buscar item, ingrediente..."
            aria-label="Buscar cardápio">
        </div>

        <nav id="catNav" class="category-nav" aria-label="Categorias"></nav>
      </div>
    </header>

    <!-- MAIN: lista de categorias e itens (renderizado por app.js) -->
    <main>
      <div id="menuList" role="list"></div>
    </main>

    <!-- TOAST -->
    <div id="toast" class="toast" role="status" aria-live="polite" style="display:flex;">
      <span id="toastMsg">Salvo com sucesso</span>
    </div>

    <!-- MODAL (backdrop + conteúdo) -->
    <div id="modalOverlay" class="modal-backdrop" aria-hidden="true">
      <div id="modalContent" class="modal" role="dialog" aria-modal="true"></div>
    </div>

    <!-- Template (HTML only) para o modal — pronto para uso quando o JS for atualizado -->
    <template id="itemModalTemplate">
      <div class="modal-header">
        <h3 class="modal-title">Detalhes</h3>
        <button class="modal-close" onclick="closeModal()">×</button>
      </div>
      <div class="modal-image-wrap">
        <img class="modal-image" src="" alt="Imagem do produto" onerror="this.style.display='none'">
      </div>
      <div class="modal-body">
        <h2 class="modal-item-name"
          style="color:var(--gold); margin-top:0; line-height:1.2; font-family:var(--font-display)"></h2>
        <p class="modal-item-desc"
          style="color:var(--text-muted); font-size:16px; line-height:1.5; margin-bottom:20px;"></p>
        <div style="height:1px; background:rgba(255,255,255,0.1); margin:10px 0;"></div>
        <div class="modal-price-big"></div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" style="width:100%; justify-content:center"
          onclick="closeModal()">Fechar</button>
      </div>
    </template>

    <!-- ADMIN BAR -->
    <div class="admin-bar" aria-hidden="true">
      <div class="admin-actions">
        <button class="btn btn-primary" type="button" onclick="addNewCategory()">Nova Seção</button>
        <button class="btn btn-outline" type="button" onclick="openAddModal()">Adicionar Item</button>
      </div>
      <div style="display:flex; gap:8px; align-items:center;">
        <button class="btn btn-outline" type="button" onclick="toggleAdmin(false)">Sair Admin</button>
      </div>
    </div>

  </div>

  <script type="module" src="app.js"></script>
</body>

</html>